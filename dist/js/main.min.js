/*! instruo.in 2013-11-08 */
window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,50)}}();var INS={animate:function(a){var b=new Date,c=setInterval(function(){var d=new Date-b,e=d/a.duration;e>1&&(e=1);var f=a.delta(e);a.step(f),1===e&&(clearInterval(c),a.fn())},a.delay||10)},updates:"no recent updates",warpSpeed:2,interGalacticSpace:function(){var a=[],b=window.innerWidth;HEIGHT=window.innerHeight;var c=150,d=b/HEIGHT,e=.1,f=4e3,g=1e3,h=INS.warpSpeed,i=function(){camera=new THREE.PerspectiveCamera(c,d,e,f),camera.position.z=g,scene=new THREE.Scene,scene.add(camera),renderer=new THREE.CanvasRenderer,renderer.setSize(b,HEIGHT),$("#inter-galactic-space").append(renderer.domElement),k(),j()},j=function(){b=window.innerWidth,HEIGHT=window.innerHeight,renderer.setSize(b,HEIGHT),m(),renderer.render(scene,camera),INS.drawCentralDisplayPanel(),requestAnimFrame(j)},k=function(){for(var b,c,d=-2e3;1e3>d;d+=20)c=new THREE.ParticleCanvasMaterial({color:10907391,program:l}),b=new THREE.Particle(c),b.position.x=(Math.random()>.5?-1:1)*(5e3*Math.random()+1e3),b.position.y=(Math.random()>.5?-1:1)*(5e3*Math.random()+1e3),b.position.z=d,b.scale.x=b.scale.y=10,scene.add(b),a.push(b)},l=function(a){a.beginPath(),a.arc(0,0,2.5,0,2*Math.PI,!0),a.shadowColor="#FFFFFF",a.shadowBlur=10,a.shadowOffsetX=0,a.shadowOffsetY=0,a.fill()},m=function(){h=INS.warpSpeed;for(var b=0;b<a.length;b++)particle=a[b],particle.position.z+=h,particle.position.z>1e3&&(particle.position.z-=3e3)};window.onresize=function(){b=window.innerWidth,HEIGHT=window.innerHeight,renderer.setSize(b,HEIGHT),INS.log("window resized")},i()},warp:function(){$("#central-display-panel div").fadeOut(300,function(){INS.animate({delay:0,duration:1e3,delta:function(a){return.7>a?a+.4:1-a},step:function(a){INS.warpSpeed=300*a+2},fn:function(){$("#central-display-panel div").fadeIn()}})})},drawCentralDisplayPanel:function(){var a=$("#central-display-panel"),b=document.getElementById("central-display-panel-background");if(b.width=a.width(),b.height=a.height(),b.getContext){var c=b.getContext("2d");c.beginPath(),c.moveTo(10,10),c.lineTo(b.width-10,10),c.lineTo(b.width-10,.8*b.height),c.lineTo(.9*b.width,b.height-10),c.lineTo(10,b.height-10),c.closePath(),c.fillStyle="rgba(90, 196, 255, 0.04)",c.strokeStyle="rgba(160, 221, 255, 1)",c.lineWidth=2,c.shadowColor="#FFFFFF",c.shadowBlur=5,c.shadowOffsetX=0,c.shadowOffsetY=0,c.stroke(),c.shadowColor="#FFFFFF",c.shadowBlur=0,c.shadowOffsetX=0,c.shadowOffsetY=0,c.fill();var d=new Date;c.translate(100,100),c.rotate(2*Math.PI/10*d.getSeconds()+2*Math.PI/1e4*d.getMilliseconds()+.5*INS.warpSpeed),c.shadowColor="#FFFFFF",c.shadowBlur=10,c.shadowOffsetX=0,c.shadowOffsetY=0,c.strokeStyle="rgba(160, 221, 255, 0.8)",c.lineWidth=10,c.beginPath(),c.arc(0,0,50,1.1*Math.PI,1.5*Math.PI,!1),c.stroke(),c.beginPath(),c.arc(0,0,50,1.6*Math.PI,1.95*Math.PI,!1),c.stroke(),c.beginPath(),c.arc(0,0,50,.05*Math.PI,.4*Math.PI,!1),c.stroke(),c.beginPath(),c.arc(0,0,50,.5*Math.PI,Math.PI,!1),c.stroke()}},log:function(a){console.log("instruo: "+a)}};$(document).ready(function(){INS.interGalacticSpace(),$("#main-dial").click(INS.warp),INS.drawCentralDisplayPanel(),$("#main-dial").css({width:"0px",height:"0px",top:"75px",left:"82px"}).show().delay("300").animate({width:"200px",height:"200px",top:"-50px",left:"-35px"},"normal")});